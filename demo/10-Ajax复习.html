<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!--
    1. ajax 阿贾克思.
       无刷新的异步请求技术.
       不刷新整个页面,就可以向服务器请求数据.


    2. 先复习纯的ajax get请求.




    3. 当我们以ajax的方式向服务器发送数据的时候.
       发送的数据是有格式的.

       当请求方式为get的时候,向服务器发送的数据的格式是Query String.
       当请求方式为post的时候,向服务器发送的数据的格式默认是:Request Payload
           服务器在接收post过来的数据的时候.绝大多数情况下不会去解析Request Payload格式的数据.
           服务器在接收post过来的数据的时候,绝大多数情况下只会去解析接收Form Data格式的数据.

       为了能够是服务器正常接收我们post过去的数据.
       我们需要将默认的Request Payload格式的数据转换为Form Data格式

       xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
       这句代码的作用就是: 将默认的Request Payload格式的数据转换为Form Data格式


    4. 注意
       当请求方式为get的时候,不需要加请求头转换数据格式. 因为服务器可以正常接收Query String格式的数据.
       只有当请求方式为post的时候.才需要加请求头转换格式.

       api地址: http://xuanwen.wang/service.ashx
       uName
       pwd
       toekn..
       post

       
    
       
       
       



    -->
    <script>
        function ajaxGet() {
            //1.创建xhr对象.
            var xhr = new XMLHttpRequest();
            //2.设置请求方式和地址.
            xhr.open("get", "./php/stus.php");
            //3.监听事件.
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    console.log(xhr.responseText);
                }
            };
            //4.发送请求.
            xhr.send();
        }


        function ajaxPost() {
            var xhr = new XMLHttpRequest();
            xhr.open("post", "./php/stus.php");
            xhr.onload = function () {
                if (xhr.status == 200) {
                    console.log(xhr.responseText);
                }
            };
            xhr.send();
        }


        function ajaxGetWithData() {
            var xhr = new XMLHttpRequest();
            xhr.open("get", "./php/get.php?name=jack&age=18");
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    console.log(xhr.responseText);
                }
            };
            xhr.send();
        }


        function ajaxPostWithData() {
            var xhr = new XMLHttpRequest();
            xhr.open("post", "./php/post.php");
            //设置请求头.
            xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    console.log(xhr.responseText);
                }
            };
            xhr.send("uName=admin&pwd=123456");
        }
    </script>
</head>

<body>
    <button onclick="ajaxGet()">纯get</button>

    <button onclick="ajaxPost()">纯post</button>

    <button onclick="ajaxGetWithData()">get请求带数据</button>

    <button onclick="ajaxPostWithData()">post请求带数据</button>
</body>

</html>